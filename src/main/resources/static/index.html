<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Inspiration App</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Bootstrap icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <!-- Google fonts-->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,wght@0,600;1,600&amp;display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,300;0,500;0,600;0,700;1,300;1,500;1,600;1,700&amp;display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,400;1,400&amp;display=swap" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />

</head>
<body id="page-top">
<!-- Navigation-->
<nav class="navbar navbar-expand-lg navbar-light fixed-top shadow-sm" id="mainNav">
    <div class="container px-5">
        <a class="navbar-brand fw-bold" href="#page-top">Inspiration App</a>
        </div>
    </div>
</nav>

<section class="bg-light">
    <div class="container px-5">
        <div class="row gx-5 align-items-center justify-content-center justify-content-lg-between">
            <form>
                <div class="mb-3">
                    <label for="userNameInput" class="form-label">User Name</label>
                    <input type="email" class="form-control" id="userNameInput" aria-describedby="emailHelp">
                </div>
                <div class="mb-3">
                    <label for="emailInput" class="form-label">Email</label>
                    <input type="email" class="form-control" id="emailInput" aria-describedby="emailHelp">
                </div>
                <div class="mb-3">
                    <label for="linkUrlLabel" class="form-label">Link Url</label>
                    <input type="password" class="form-control" id="linkUrlLabel">
                </div>
                <label for="typeLabel" class="form-label">Type</label>
                <select class="form-select" aria-label="Default select example" id="typeLabel">
                    <option value="1">video</option>
                    <option value="2">blog</option>
                    <option value="3">other</option>
                </select>
                <br>

                <button type="submit" class="btn btn-primary">Submit</button>
            </form>
        </div>
    </div>
</section>

<!-- App features section-->
<section id="table-data">
    <div class="container px-5">
        <table id="myTable" class="table table-striped" >
            <thead>
            <tr>
                <th>ENO</th>
                <th>EMPName</th>
                <th>Country</th>
                <th>Salary</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>001</td>
                <td>Anusha</td>
                <td>India</td>
                <td>10000</td>
            </tr>
            <tr>
                <td>002</td>
                <td>Charles</td>
                <td>United Kingdom</td>
                <td>28000</td>
            </tr>
            <tr>
                <td>003</td>
                <td>Sravani</td>
                <td>Australia</td>
                <td>7000</td>
            </tr>
            <tr>
                <td>004</td>
                <td>Amar</td>
                <td>India</td>
                <td>18000</td>
            </tr>
            <tr>
                <td>005</td>
                <td>Lakshmi</td>
                <td>India</td>
                <td>12000</td>
            </tr>
            <tr>
                <td>006</td>
                <td>James</td>
                <td>Canada</td>
                <td>50000</td>
            </tr>

            <tr>
                <td>007</td>
                <td>Ronald</td>
                <td>US</td>
                <td>75000</td>
            </tr>
            <tr>
                <td>008</td>
                <td>Mike</td>
                <td>Belgium</td>
                <td>100000</td>
            </tr>
            <tr>
                <td>009</td>
                <td>Andrew</td>
                <td>Argentina</td>
                <td>45000</td>
            </tr>

            <tr>
                <td>010</td>
                <td>Stephen</td>
                <td>Austria</td>
                <td>30000</td>
            </tr>
            <tr>
                <td>011</td>
                <td>Sara</td>
                <td>China</td>
                <td>750000</td>
            </tr>
            <tr>
                <td>012</td>
                <td>JonRoot</td>
                <td>Argentina</td>
                <td>65000</td>
            </tr>
            </tbody>
        </table>
    </div>

</section>
<!-- Basic features section-->

<!-- Call to action section-->
<!-- App badge section-->
<!-- Footer-->
<footer class="bg-black text-center py-5">
    <div class="container px-5">
        <div class="text-white-50 small">
            <div class="mb-2">&copy; Your Website 2021. All Rights Reserved.</div>
            <a href="#!">Privacy</a>
            <span class="mx-1">&middot;</span>
            <a href="#!">Terms</a>
            <span class="mx-1">&middot;</span>
            <a href="#!">FAQ</a>
        </div>
    </div>
</footer>
<!-- Feedback Modal-->
<div class="modal fade" id="feedbackModal" tabindex="-1" aria-labelledby="feedbackModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-gradient-primary-to-secondary p-4">
                <h5 class="modal-title font-alt text-white" id="feedbackModalLabel">Send feedback</h5>
                <button class="btn-close btn-close-white" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body border-0 p-4">
                <!-- * * * * * * * * * * * * * * *-->
                <!-- * * SB Forms Contact Form * *-->
                <!-- * * * * * * * * * * * * * * *-->
                <!-- This form is pre-integrated with SB Forms.-->
                <!-- To make this form functional, sign up at-->
                <!-- https://startbootstrap.com/solution/contact-forms-->
                <!-- to get an API token!-->
                <form id="contactForm" data-sb-form-api-token="API_TOKEN">
                    <!-- Name input-->
                    <div class="form-floating mb-3">
                        <input class="form-control" id="name" type="text" placeholder="Enter your name..." data-sb-validations="required" />
                        <label for="name">Full name</label>
                        <div class="invalid-feedback" data-sb-feedback="name:required">A name is required.</div>
                    </div>
                    <!-- Email address input-->
                    <div class="form-floating mb-3">
                        <input class="form-control" id="email" type="email" placeholder="name@example.com" data-sb-validations="required,email" />
                        <label for="email">Email address</label>
                        <div class="invalid-feedback" data-sb-feedback="email:required">An email is required.</div>
                        <div class="invalid-feedback" data-sb-feedback="email:email">Email is not valid.</div>
                    </div>
                    <!-- Phone number input-->
                    <div class="form-floating mb-3">
                        <input class="form-control" id="phone" type="tel" placeholder="(123) 456-7890" data-sb-validations="required" />
                        <label for="phone">Phone number</label>
                        <div class="invalid-feedback" data-sb-feedback="phone:required">A phone number is required.</div>
                    </div>
                    <!-- Message input-->
                    <div class="form-floating mb-3">
                        <textarea class="form-control" id="message" type="text" placeholder="Enter your message here..." style="height: 10rem" data-sb-validations="required"></textarea>
                        <label for="message">Message</label>
                        <div class="invalid-feedback" data-sb-feedback="message:required">A message is required.</div>
                    </div>
                    <!-- Submit success message-->
                    <!---->
                    <!-- This is what your users will see when the form-->
                    <!-- has successfully submitted-->
                    <div class="d-none" id="submitSuccessMessage">
                        <div class="text-center mb-3">
                            <div class="fw-bolder">Form submission successful!</div>
                            To activate this form, sign up at
                            <br />
                            <a href="https://startbootstrap.com/solution/contact-forms">https://startbootstrap.com/solution/contact-forms</a>
                        </div>
                    </div>
                    <!-- Submit error message-->
                    <!---->
                    <!-- This is what your users will see when there is-->
                    <!-- an error submitting the form-->
                    <div class="d-none" id="submitErrorMessage"><div class="text-center text-danger mb-3">Error sending message!</div></div>
                    <!-- Submit Button-->
                    <div class="d-grid"><button class="btn btn-primary rounded-pill btn-lg disabled" id="submitButton" type="submit">Submit</button></div>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!--<script src="js/scripts.js"></script>-->

<script>
    $(document).ready(function() {
        console.log("hi guys im here")
        //populate the initial table with what's in the db.
        $.ajax({url: "http://localhost:8080/inspiration-item", success: function(result){
                console.log("before populateTable");
               // populateList(result);
        }});

        $("button").click(function(){
            var userNameInput = $("#userNameInput").val();
            var emailInput = $("#emailInput").val();
            var linkUrlLabel = $("#linkUrlLabel").val();
            var typeLabel = $("#typeLabel").val();
            $('ul').empty()
            if (!userNameInput || userNameInput.length === 0) {
                alert("please enter a user name");
            } else if (!emailInput || emailInput.length === 0) {
                alert("please enter an email");
            } else if (!linkUrlLabel || linkUrlLabel.length === 0) {
                alert("please enter an link url");
            } else {
                //need to do a post here to create a new item
                $.post('http://localhost:8080/inspiration-item', {submitterUsername:userNameInput, submitterEmail:emailInput, url:linkUrlLabel, type:typeLabel}, function(response){
                    console.log("respons for create new inspriation al item ", response);
                    //$("#mypar").html(response.amount);
                });
            }

        });


    });

    function populateList (json) {
        //transform it into new object structure
        console.log("inside populateList");
        let outgoingFlights = json.filter(value => value.isOutGoingLeg);
        let incomingFlights = json.filter(value => !value.isOutGoingLeg);
        for (let i =0; i< outgoingFlights.length; i++) {
            let curr = outgoingFlights[i];
            let destCode = curr.destinationCode;
            for (let j = 0; j < incomingFlights.length; j++) {
                let temp = incomingFlights[j];
                let dateOneStr = dateOne.getDate() + "-" + (dateOne.getMonth()+1) + "-" + dateOne.getFullYear();
                let dateTwoStr = twoDaysLater.getDate() + "-" + (twoDaysLater.getMonth()+1) + "-" + twoDaysLater.getFullYear();
                if (temp.originCode === destCode && dateOneStr === dateTwoStr) {
                    //flightResponse.getFlights().add(Arrays.asList(curr, temp));
                    $('ul').append('<li> From: ' + curr.originCode + ' To: ' + temp.originCode +
                        ' Dates: '+ curr.departureLocalDate + ' to '+ temp.departureLocalDate + ' Price: $' + (((curr.priceInCents) + (temp.priceInCents))/100)  + '</li><br>');
                    break;
                }
            }
        }
        //console.log(json);
    }

</script>
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
<!-- * *                               SB Forms JS                               * *-->
<!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
<script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
</body>
</html>